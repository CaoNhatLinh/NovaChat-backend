# =======================
# APPLICATION CONFIG
# =======================
spring.application.name=chat-service
server.port=8084

# =======================
# SECURITY (JWT) CONFIG
# =======================
jwt.secret=2de95e83bd6b691501d7a29d734f404f4823604c02c99daf7768f1b7c2f62fbd
jwt.expirationMs=86400000

# =======================
# DATABASE CONFIG
# =======================
# Cassandra Configuration
spring.data.cassandra.contact-points=localhost
spring.data.cassandra.port=9042
spring.data.cassandra.keyspace-name=chat_app
spring.data.cassandra.local-datacenter=datacenter1
spring.data.cassandra.schema-action=CREATE_IF_NOT_EXISTS
spring.data.cassandra.entity-naming-strategy=snake_case

# Redis Configuration
spring.redis.host=localhost
spring.redis.port=6379
cache.cleanup.enabled=true
cache.cleanup.on-startup=true
cache.cleanup.patterns=dm_conversation:*,user_conversations:*,conversation:*,message:*

# Enable Redis keyspace notifications for expired keys
spring.redis.timeout=2000ms
spring.redis.database=0

# Redis keyspace notifications configuration
# Enable keyspace notifications for expired keys
spring.redis.jedis.pool.enabled=false

# Cache startup cleanup configuration
cache.startup.clear.enabled=true
cache.startup.clear.dev-only=true

# Ch? enable trong development
spring.profiles.active=dev
# =======================
# KAFKA CONFIG
# =======================
spring.kafka.bootstrap-servers=localhost:9092

# Producer Configuration
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer
spring.kafka.producer.enable-idempotence=true
spring.kafka.producer.max-in-flight-requests-per-connection=5
spring.kafka.producer.acks=all
spring.kafka.producer.retries=3
spring.kafka.producer.batch-size=16384
spring.kafka.producer.buffer-memory=33554432

# Consumer Configuration
spring.kafka.consumer.group-id=chat-service
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=false
spring.kafka.consumer.max-poll-records=500
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer
spring.kafka.listener.missing-topics-fatal=false

# Add session timeout and heartbeat configurations for stability
spring.kafka.consumer.properties.session.timeout.ms=30000
spring.kafka.consumer.properties.heartbeat.interval.ms=10000
spring.kafka.consumer.properties.max.poll.interval.ms=300000

# =======================
# ELASTICSEARCH CONFIG
# =======================
elasticsearch.enabled=false
elasticsearch.host=localhost
elasticsearch.port=9200

# =======================
# PAGINATION CONFIG
# =======================
spring.data.web.pageable.default-page-size=20
spring.data.web.pageable.max-page-size=100

# =======================
# LOGGING CONFIG
# =======================
logging.level.com.chatapp=DEBUG
logging.level.org.apache.kafka.clients=INFO
logging.level.org.springframework.kafka=INFO

# =======================
# JACKSON CONFIG
# =======================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=UTC

# =======================
# CLOUDINARY CONFIG
# =======================
# Get these from https://cloudinary.com/console (Free tier: 25GB)
cloudinary.cloud-name=your_cloud_name
cloudinary.api-key=your_api_key
cloudinary.api-secret=your_api_secret

# =======================
# FILE UPLOAD CONFIG
# =======================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=50MB